"use strict";!function(){function a(a,b,c){b.theme("default").primaryPalette("deep-purple"),a.state("app",{url:"",templateUrl:"modules/app/views/layout.html"}).state("home",{parent:"app",template:"<p>Home</p>"}),c.otherwise("/contact")}angular.module("app",[]),angular.module("app").config(a),a.$inject=["$stateProvider","$mdThemingProvider","$urlRouterProvider"]}(),function(){function a(a){a.state("contact",{parent:"app",url:"/contact",templateUrl:"modules/contact/views/contact.html",controller:"ContactCtrl",controllerAs:"vm"}).state("contact.list",{url:"/list",templateUrl:"modules/contact/views/contact-list.html",controller:"ContactListCtrl",controllerAs:"vm",resolve:{contacts:["Contact",function(a){return a.getList().then(null,function(a){console.log("err",a)})}]}}).state("contact.detail",{parent:"contact.list",url:"/detail/:id",templateUrl:"modules/contact/views/contact-detail.html",controller:"ContactDetailCtrl",controllerAs:"vm",resolve:{contact:["Contact","$stateParams",function(a,b){return a.getById(b.id)}]}}).state("contact.form",{parent:"contact.detail",url:"/form/:id",templateUrl:"modules/contact/views/contact-form.html",controller:"ContactFormCtrl",controllerAs:"vm",resolve:{contact:["Contact","$stateParams",function(a,b){return a.getById(b.id)}]}})}angular.module("app.contact",[]),angular.module("app.contact").config(a),a.$inject=["$stateProvider"]}(),function(){function a(a,b,c){function d(){h.contact=angular.copy(c),h.onDelete=g,h.onEdit=f,a.$on("contact:refresh",e)}function e(){b.getById(h.contact.id).then(function(a){h.contact=a})}function f(b){var c=angular.copy(h.contact);a.$emit("contact:edit",function(a){a(b,c)})}function g(b){var c=angular.copy(h.contact);a.$emit("contact:delete",function(a){a(b,c)})}var h=this;d()}angular.module("app.contact").controller("ContactDetailCtrl",a),a.$inject=["$scope","Contact","contact"]}(),function(){function a(a,b){function c(){e.onSave=d}function d(){var b=angular.copy(e.contact);a.cancel&&a.cancel(),a.$emit("contact:save",function(a){a(b)})}var e=this;c()}angular.module("app.contact").controller("ContactFormCtrl",a),a.$inject=["$scope","Contact"]}(),function(){function a(a,b,c,d){function e(){i.contacts=angular.copy(d),i.onSelect=h,a.$on("contact:refresh",f),a.$on("contact:search",g),a.$evalAsync(function(){"contact.list"==b.current.name&&h(i.contacts[0])})}function f(){c.getList().then(function(a){i.contacts=a})}function g(a,b){return c.getList({q:b}).then(function(a){i.contacts=a,h(i.contacts[0])})}function h(a){var c=a?"contact.detail":"contact.list",d=a?{id:a.id}:null;b.go(c,d)}var i=this;e()}angular.module("app.contact").controller("ContactListCtrl",a),a.$inject=["$scope","$state","Contact","contacts"]}(),function(){function a(a,b,c,d,e,f){function g(){s.onAdd=k,s.onSearch=j,b.$on("contact:select",h(i)),b.$on("contact:delete",h(m)),b.$on("contact:edit",h(l)),b.$on("contact:save",h(n)),b.$evalAsync(function(){"contact"==c.current.name&&c.go("contact.list")})}function h(a){return function(b,c){return c(a)}}function i(a){b.$broadcast("contact:selected",a)}function j(a){b.$broadcast("contact:search",a)}function k(a){o(a,{})}function l(a,b){o(a,b)}function m(a,b){p(a,b)}function n(a){r(a)}function o(a,c){console.log("contact",c);var f=e("sm")||e("xs");d.show({controller:"ContactFormCtrl",controllerAs:"vm",bindToController:!0,locals:{contact:c},scope:b.$new(),templateUrl:"modules/contact/views/contact-form.html",parent:angular.element(document.body),targetEvent:a,fullscreen:f,onComplete:function(a){a.cancel=function(){d.hide()}}})}function p(a,b){var c=d.confirm().title("Confirm - Delete").textContent("Would you like to delete contact of "+b.name+"?").ariaLabel("Confirm-Delete").targetEvent(a).ok("Delete").cancel("Cancel");d.show(c).then(function(){q(b)})["finally"](function(){c=void 0})}function q(a){f.remove(a.id).then(function(){b.$broadcast("contact:refresh"),c.go("contact.list")})}function r(a){f.save(a).then(function(a){console.log("save.data",a),b.$broadcast("contact:refresh"),c.go("contact.detail",{id:a.id})})}var s=this;g()}angular.module("app.contact").controller("ContactCtrl",a),a.$inject=["$rootScope","$scope","$state","$mdDialog","$mdMedia","Contact"]}(),function(){function a(a,b){function c(b){var c="/contacts/";return a.get(c,{params:b}).then(function(a){return a.data})}function d(b){var c="/contacts/"+b;return a.get(c).then(function(a){return a.data})}function e(b){var c="/contacts/"+b;return a["delete"](c).then(function(a){return a.data})}function f(a){return a.id?g(a,a.id):h(a)}function g(b,c){var d="/contacts/"+c;return a.put(d,b).then(function(a){return a.data})}function h(b){var c="/contacts/";return a.post(c,b).then(function(a){return a.data})}var i;return i={getList:c,getById:d,remove:e,save:f}}angular.module("app.contact").factory("Contact",a),a.$inject=["$http","$q"]}();